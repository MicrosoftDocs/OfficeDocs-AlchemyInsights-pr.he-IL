---
title: פתרון בעיות בפרוטוקולים OAuth 2.0 ו-OpenID Connect
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 03/17/2021
audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "9776"
- "9004342"
ms.openlocfilehash: d2f14d4d16bea890b564cdb9bd9ac3875c28d115
ms.sourcegitcommit: c08bed4071baa3bb5879496df3ed44fb828c8367
ms.translationtype: MT
ms.contentlocale: he-IL
ms.lasthandoff: 03/19/2021
ms.locfileid: "51036407"
---
# <a name="troubleshoot-oauth-20-and-openid-connect-protocols"></a><span data-ttu-id="56c42-102">פתרון בעיות בפרוטוקולים OAuth 2.0 ו-OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="56c42-102">Troubleshoot OAuth 2.0 and OpenID Connect protocols</span></span>

<span data-ttu-id="56c42-103">כדי לפתור את בעיות החיבור של OAuth 2.0 ו-OpenID, בצע את השלבים המומלצים הבאים:</span><span class="sxs-lookup"><span data-stu-id="56c42-103">To resolve OAuth 2.0 and OpenID Connect issues, perform the following recommended steps:</span></span>

<span data-ttu-id="56c42-104">עיין במאמרים הבאים הקשורים לתצורה ולפתרון בעיות בפרוטוקולים OAuth 2.0 ו-OpenID Connect:</span><span class="sxs-lookup"><span data-stu-id="56c42-104">Refer to the following articles that are related to configuration and troubleshooting OAuth 2.0 and OpenID Connect protocols:</span></span>

- <span data-ttu-id="56c42-105">מאמר זה מתאר את [הזרימה של פלטפורמת הזהות של Microsoft ואת OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) -מאמר זה מתאר כיצד לתכנת ישירות נגד **הזרימה של מענק הקוד (PKCE)** ביישום שלך, באמצעות כל שפה.</span><span class="sxs-lookup"><span data-stu-id="56c42-105">[Microsoft identity platform and OAuth 2.0 authorization code flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) - This article describes how to program directly against the **code grant (PKCE) flow** in your application, using any language.</span></span>
- <span data-ttu-id="56c42-106">[פלטפורמת הזהויות של Microsoft וזרימת אישורי הלקוח של OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) -מאמר זה מתאר כיצד לתכנת ישירות כנגד **זרימת אישורי הלקוח** ביישום שלך.</span><span class="sxs-lookup"><span data-stu-id="56c42-106">[Microsoft identity platform and the OAuth 2.0 client credentials flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) - This article describes how to program directly against the **client credentials flow** in your application.</span></span>
- <span data-ttu-id="56c42-107">מאמר זה מתאר כיצד לתכנת ישירות לגבי **הזרימה של ROPC** ביישום שלך [באמצעות Microsoft identity Platform platform 2.0 OAuth](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth-ropc) .</span><span class="sxs-lookup"><span data-stu-id="56c42-107">[Microsoft identity platform and OAuth 2.0 Resource Owner Password Credentials](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth-ropc) - This article describes how to program directly against the **ROPC flow** in your application.</span></span>
    - <span data-ttu-id="56c42-108">פלטפורמת הזהויות של Microsoft תומכת רק ב-ROPC עבור דיירים של הודעות מיידיות, ולא עבור חשבונות אישיים.</span><span class="sxs-lookup"><span data-stu-id="56c42-108">The Microsoft identity platform only supports ROPC for Azure AD tenants, and not for personal accounts.</span></span> <span data-ttu-id="56c42-109">משמעות הדבר היא שעליך להשתמש בנקודת קצה ספציפית לדייר **https://login.microsoftonline.com/{TenantId_or_Name}) (** או בנקודת הקצה של **הארגונים** .</span><span class="sxs-lookup"><span data-stu-id="56c42-109">This means that you must use a tenant-specific endpoint **(https://login.microsoftonline.com/{TenantId_or_Name})** or the **organizations** endpoint.</span></span>
    - <span data-ttu-id="56c42-110">חשבונות אישיים המוזמנים לדייר המודע של תכלת אינם יכולים להשתמש ב-ROPC.</span><span class="sxs-lookup"><span data-stu-id="56c42-110">Personal accounts that are invited to an Azure AD tenant can't use ROPC.</span></span>
    - <span data-ttu-id="56c42-111">חשבונות שאין להם סיסמאות אינם מצליחים להיכנס דרך ROPC.</span><span class="sxs-lookup"><span data-stu-id="56c42-111">Accounts that don't have passwords can't sign in through ROPC.</span></span> <span data-ttu-id="56c42-112">בתרחיש זה, מומלץ להשתמש בזרימה אחרת עבור האפליקציה שלך, במקום זאת.</span><span class="sxs-lookup"><span data-stu-id="56c42-112">For this scenario, we recommend that you use a different flow for your app, instead.</span></span>
    - <span data-ttu-id="56c42-113">אם המשתמשים צריכים להשתמש [באימות רב-גורמי (מנהל מכשפות)](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) כדי להיכנס ליישום, הם ייחסמו.</span><span class="sxs-lookup"><span data-stu-id="56c42-113">If users need to use [multi-factor authentication (MFA)](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) to log in to the application, they will be blocked.</span></span>
    - <span data-ttu-id="56c42-114">ROPC אינו נתמך בתרחישים של [האיחוד הזהויות ההיברידית](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-fed) (לדוגמה, התכלת המודע ו-ADFS המשמשים לאימות חשבונות מקומיים).</span><span class="sxs-lookup"><span data-stu-id="56c42-114">ROPC is not supported in [hybrid identity federation](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-fed) scenarios (for example, Azure AD and ADFS used to authenticate on-premises accounts).</span></span> <span data-ttu-id="56c42-115">אם משתמשים בעלי עמוד מלא מנותבים מחדש לספק זהויות מקומי, לתכלת לספירה אין אפשרות לבדוק את שם המשתמש והסיסמה כנגד ספק הזהויות.</span><span class="sxs-lookup"><span data-stu-id="56c42-115">If users are full-page redirected to an on-premises identity provider, Azure AD is not able to test the username and password against that identity provider.</span></span> <span data-ttu-id="56c42-116">[אימות מעבר](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta) נתמך עם ROPC, עם זאת.</span><span class="sxs-lookup"><span data-stu-id="56c42-116">[Pass-through authentication](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta) is supported with ROPC, however.</span></span>
    - <span data-ttu-id="56c42-117">חריגה לתרחיש האיחוד של זהויות היברידיות תהיה הדוגמה הבאה: מדיניות גילוי תחום הבית עם **AllowCloudPasswordValidation** מוגדר ל- **TRUE** תאפשר זרימה של ROPC כדי לעבוד עבור משתמשים מאוחדים כאשר סיסמה מקומית מסונכרנת לענן.</span><span class="sxs-lookup"><span data-stu-id="56c42-117">An exception to a hybrid identity federation scenario would be the following: Home Realm Discovery policy with **AllowCloudPasswordValidation** set to **TRUE** will enable ROPC flow to work for federated users when on-premises password is synced to cloud.</span></span> <span data-ttu-id="56c42-118">לקבלת מידע נוסף, ראה [הפיכת אימות ROPC ישיר של משתמשים מאוחדים לזמינים עבור יישומים מדור קודם](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-authentication-for-federated-users-portal#enable-direct-ropc-authentication-of-federated-users-for-legacy-applications)</span><span class="sxs-lookup"><span data-stu-id="56c42-118">For more information, see [Enable direct ROPC authentication of federated users for legacy applications](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-authentication-for-federated-users-portal#enable-direct-ropc-authentication-of-federated-users-for-legacy-applications)</span></span> 
- <span data-ttu-id="56c42-119">[פלטפורמת הזהות של Microsoft ו-OAuth 2.0 מטעם הזרימה-מאמר](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) זה מתאר כיצד לתכנת ישירות מול הזרימה המדוברת **של (OBO)** ביישום שלך.</span><span class="sxs-lookup"><span data-stu-id="56c42-119">[Microsoft identity platform and OAuth 2.0 On-Behalf-Of flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) - This article describes how to program directly against the **on-behalf-of (OBO) flow** in your application.</span></span>
- <span data-ttu-id="56c42-120">[פלטפורמת הזהות של Microsoft ופרוטוקול החיבור של OpenID](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc) -מאמר זה מראה כיצד ליישם את פרוטוקול החיבור של OpenID ללא שימוש בשפה, ומתאר כיצד לשלוח ולקבל הודעות HTTP מבלי להשתמש בספריות מקור Open של microsoft.</span><span class="sxs-lookup"><span data-stu-id="56c42-120">[Microsoft identity platform and OpenID Connect protocol](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc) - This article shows how to implement the OpenID Connect protocol independent of language, and describes how to send and receive HTTP messages without using any Microsoft open-source libraries.</span></span>

<span data-ttu-id="56c42-121">**אסימוני גישה**</span><span class="sxs-lookup"><span data-stu-id="56c42-121">**Access Tokens**</span></span>

<span data-ttu-id="56c42-122">[אסימוני גישה לפלטפורמת הזהויות של Microsoft](https://docs.microsoft.com/azure/active-directory/develop/access-tokens) -למד כיצד ה-API שלך יכול לאמת ולהשתמש בטענות בתוך אסימון גישה.</span><span class="sxs-lookup"><span data-stu-id="56c42-122">[Microsoft identity platform access tokens](https://docs.microsoft.com/azure/active-directory/develop/access-tokens) - Learn how your API can validate and use the claims inside an access token.</span></span> <span data-ttu-id="56c42-123">כל התיעוד במאמר זה, למעט היכן שצוין, חל רק על אסימונים שהונפקו עבור APIs שנרשמת.</span><span class="sxs-lookup"><span data-stu-id="56c42-123">All documentation in this article, except where noted, applies only to tokens issued for APIs you've registered.</span></span> <span data-ttu-id="56c42-124">הוא אינו חל על אסימונים שהונפקו עבור ממשקי Api בבעלות Microsoft, וגם לא ניתן להשתמש באסימונים אלה כדי לאמת את האופן שבו פלטפורמת הזהות של Microsoft תיצור אסימונים עבור ממשק API שאתה יוצר.</span><span class="sxs-lookup"><span data-stu-id="56c42-124">It does not apply to tokens issued for Microsoft-owned APIs, nor can those tokens be used to validate how the Microsoft identity platform will issue tokens for an API you create.</span></span>

<span data-ttu-id="56c42-125">**תצורת יישום**</span><span class="sxs-lookup"><span data-stu-id="56c42-125">**Application Configuration**</span></span>

<span data-ttu-id="56c42-126">[ניתוב מחדש של uri (כתובת url של השב) ומגבלות](https://docs.microsoft.com/azure/active-directory/develop/reply-url) -למד כיצד לקבוע את התצורה של uri הניתוב מחדש (כתובת url של השב).</span><span class="sxs-lookup"><span data-stu-id="56c42-126">[Redirect URI (reply URL) restrictions and limitations](https://docs.microsoft.com/azure/active-directory/develop/reply-url) - Learn how to configure your Redirect URI (reply URL).</span></span> <span data-ttu-id="56c42-127">כתובת URL של ' ניתוב מחדש ' או ' השב ', היא המיקום שבו שרת ההרשאות שולח את המשתמש לאחר שהיישום הוסמך בהצלחה ומקבל קוד הרשאה או אסימון גישה.</span><span class="sxs-lookup"><span data-stu-id="56c42-127">A redirect URI, or reply URL, is the location where the authorization server sends the user once the app has been successfully authorized and granted an authorization code or access token.</span></span> <span data-ttu-id="56c42-128">שרת ההרשאות שולח את הקוד או האסימון לאורי הניתוב מחדש; לכן חשוב לרשום את המיקום הנכון כחלק מתהליך הרישום של האפליקציה.</span><span class="sxs-lookup"><span data-stu-id="56c42-128">The authorization server sends the code or token to the redirect URI; so it's important you register the correct location as part of the app registration process.</span></span>

<span data-ttu-id="56c42-129">**הקצאת יישומים**</span><span class="sxs-lookup"><span data-stu-id="56c42-129">**Application Provisioning**</span></span>

<span data-ttu-id="56c42-130">[ערכת לימוד: פיתוח ותכנון הקצאת משאבים עבור נקודת קצה של SCIM-מאמר](https://docs.microsoft.com/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups) זה מתאר כיצד לבנות נקודת קצה של SCIM ולהשתלב עם שירות הקצאת המשאבים המשולבים.</span><span class="sxs-lookup"><span data-stu-id="56c42-130">[Tutorial: Develop and plan provisioning for a SCIM endpoint](https://docs.microsoft.com/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups) - This article describes how to build an SCIM endpoint and integrate with the AAD provisioning service.</span></span>


